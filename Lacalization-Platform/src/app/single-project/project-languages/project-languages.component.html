<!-- single project list display -->
<table class="table text-white mb-0">
    <thead>
      <tr>
        <th scope="col"><span class="badge badge-light" style="background-color: black; margin-right: 2px;">{{projectLanguages.length}}</span>Languages</th>
        <th><div class="dropdown">
          <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
            Order by Date Asc
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <li><a class="dropdown-item" href="#">Date Desc</a></li>
            <li><a class="dropdown-item" href="#">Name Asc</a></li>
            <li><a class="dropdown-item" href="#">Name Desc</a></li>
          </ul>
        </div></th>
        <th style="display: flex; justify-content: end;">
          <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary custom-btn" (click)="openLanguageModal()">+</button>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="projectLanguages.length === 0">
        <td colspan="4">Add your first language for this project</td>
      </tr> 
      <tr *ngFor="let projectLanguage of projectLanguages" class="fw-normal">
        <th><a [routerLink]="['/language', projectLanguage.id]" class="link-dark">
          <span [class]="getFlagClass(getLanguageCodeById(projectLanguage.languageId))"></span>

          <span class="ms-2">{{ getLanguageNameById(projectLanguage.languageId) }} <span class="lan-code">{{ getLanguageCodeById(projectLanguage.languageId) }}</span></span>
        </a>
        </th>
        <td class="align-middle">
          <div class="progress" style="width: 50%;">
            <div class="progress-bar bg-success" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          <small>20%</small>
        </td>
        <td class="align-middle custom-td" style="display: flex; justify-content: end;">
          <a href="#!" data-mdb-tooltip-init title="Change language">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
          </svg>
        </a>
              <a href="#" data-mdb-tooltip-init title="Add Contributors">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person-add" viewBox="0 0 16 16">
                  <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0m-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
                  <path d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"/>
                </svg>
              </a>
              <button type="button" class="custom-iconBtn" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Remove language" (click)="deleteLanguage(projectLanguage.id)"><i
                class="fas fa-trash-alt fa-lg text-warning"></i></button>
        </td>
      </tr>
    </tbody>
  </table>


  <!-- Modal -->
<ng-template #yourModalTemplate let-modal>
    <div class="modal-header">
      <h5 class="modal-title">Select Languages</h5>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
      <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="Choose a language" [(ngModel)]="selectedLanguage" (focus)="showDropdown = true" (blur)="hideDropdown()">
      </div>
      <div *ngIf="showDropdown">
        <ul class="list-group position-absolute z-index-1 w-100">
          <li class="list-group-item" *ngFor="let language of filteredLanguages()" (click)="selectLanguage(language)">
            {{ language.name }}
          </li>
        </ul>
      </div>
      <div>
        <ul class="list-group mt-3 language-display">
          <li class="list-item d-flex justify-content-between align-items-center custom-class" *ngFor="let language of selectedLanguages">
            {{ language.name }}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16" (click)="removeLanguage(language)">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
              <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
            </svg>
          </li>
        </ul>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Close</button>
      <button type="button" class="btn btn-primary" (click)="saveLanguages(modal)">Add</button>
    </div>
  </ng-template>
